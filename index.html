<!DOCTYPE html>
<html>
<head>
  <title>GO GREEN â€“ Login</title>
  <style>
    body {
      font-family: Arial;
      background: #e8f5e9;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .card {
      background: white;
      padding: 25px;
      border-radius: 10px;
      width: 320px;
      box-shadow: 0 4px 10px rgba(0,0,0,.2);
    }
    h2 { color: green; text-align: center; }
    input, select, button {
      width: 100%;
      margin-top: 10px;
      padding: 8px;
    }
    button {
      background: green;
      color: white;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>ðŸŒ± GO GREEN</h2>

  <input id="email" placeholder="Enter Email" />
  <select id="role">
    <option value="">Select Role</option>
    <option value="admin">Admin</option>
    <option value="hod">HOD</option>
    <option value="faculty">Faculty</option>
    <option value="coordinator">Coordinator</option>
    <option value="student">Student</option>
  </select>

  <button onclick="sendOtp()">Send OTP</button>

  <input id="otp" placeholder="Enter OTP" />
  <button onclick="verifyOtp()">Verify OTP</button>
</div>

<script>
const API = 'https://script.google.com/macros/s/AKfycbwV_SjR5wASHwKWjWd-fLlVFFWbc-pGAUUVXcYlEOUbH1JeUnwILr-nMhPvHWLoUW19BQ/exec';

function sendOtp() {
  fetch(API, {
    method: 'POST',
    body: JSON.stringify({
      action: 'sendOtp',
      email: email.value,
      role: role.value
    })
  }).then(r => r.json()).then(d => alert(d.message));
}

function verifyOtp() {
  fetch(API, {
    method: 'POST',
    body: JSON.stringify({
      action: 'verifyOtp',
      email: email.value,
      otp: otp.value
    })
  }).then(r => r.json()).then(d => {
    if (d.success) {
      localStorage.setItem('role', role.value);
      window.location = role.value + '.html';
    } else alert(d.message);
  });
}
</script>

</body>
</html>
