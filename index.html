<!DOCTYPE html>
<html>
<head>
  <title>Faculty Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

<h2>Faculty Login</h2>

<input id="email" placeholder="Faculty Email">
<button onclick="sendOTP()">Send OTP</button>

<div id="otpBox" style="display:none;">
  <input id="otp" placeholder="Enter OTP">
  <button onclick="verifyOTP()">Verify & Login</button>
</div>

<script>
const SCRIPT_URL = "1yQUmffUb3o_8HpStMYwsYDu03TxaQ65lMEHt2aaFLVU";
let lockedEmail = "";

function sendOTP() {
  lockedEmail = document.getElementById("email").value.trim().toLowerCase();

  fetch(`${SCRIPT_URL}?action=sendOTP&email=${encodeURIComponent(lockedEmail)}`)
    .then(r => r.text())
    .then(res => {
      if (res === "OTP_SENT") {
        document.getElementById("otpBox").style.display = "block";
        alert("OTP sent");
      } else {
        alert(res);
      }
    });
}

function verifyOTP() {
  const otp = document.getElementById("otp").value.trim();

  fetch(`${SCRIPT_URL}?action=verifyOTP&email=${encodeURIComponent(lockedEmail)}&otp=${otp}`)
    .then(r => r.text())
    .then(res => {
      if (res === "VERIFIED") {
        localStorage.setItem("facultyEmail", lockedEmail);
        location.href = "faculty.html";
      } else {
        alert(res);
      }
    });
}
</script>

</body>
</html>
