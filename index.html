<!DOCTYPE html>
<html>
<head>
  <title>GO GREEN Login</title>
  <style>
    body{font-family:Arial;background:#eaf5ea}
    .box{max-width:350px;margin:80px auto;padding:20px;background:#fff}
    button{width:100%;padding:10px;background:green;color:#fff}
  </style>
</head>
<body>

<div class="box">
  <h2>ðŸŒ± GO GREEN</h2>

  <input id="email" placeholder="Email"><br><br>
  <select id="role">
    <option value="admin">Admin</option>
    <option value="faculty">Faculty</option>
  </select><br><br>

  <button onclick="sendOtp()">Send OTP</button><br><br>

  <input id="otp" placeholder="Enter OTP"><br><br>
  <button onclick="verifyOtp()">Verify OTP</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwV_SjR5wASHwKWjWd-fLlVFFWbc-pGAUUVXcYlEOUbH1JeUnwILr-nMhPvHWLoUW19BQ/exec";

function sendOtp(){
  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"sendOtp",
      email:email.value.trim(),
      role:role.value
    })
  }).then(r=>r.json()).then(d=>alert(d.message));
}

function verifyOtp(){
  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      action:"verifyOtp",
      email:email.value.trim(),
      otp:otp.value.trim()
    })
  }).then(r=>r.json()).then(d=>{
    if(d.success){
      localStorage.setItem("email",email.value);
      localStorage.setItem("role",role.value);
      window.location="admin.html";
    }else alert(d.message);
  });
}
</script>
</body>
</html>
