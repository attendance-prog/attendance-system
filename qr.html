<!DOCTYPE html>
<html>
<head>
  <title>Generate Attendance QR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{font-family:Arial;background:#f5f5f5;padding:20px}
    .box{background:#fff;padding:20px;border-radius:8px}
    input,button{width:100%;padding:12px;margin-top:10px}
    button{background:#1976d2;color:#fff;border:none}
    img{margin-top:20px;width:100%}
  </style>
</head>

<body>
<div class="box">
  <h2>Generate Attendance QR</h2>

  <input id="email" placeholder="Faculty Email">
  <input id="subjectId" placeholder="Subject ID (eg MBA101)">

  <button onclick="generateQR()">Generate QR</button>

  <div id="result"></div>
</div>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbwV_SjR5wASHwKWjWd-fLlVFFWbc-pGAUUVXcYlEOUbH1JeUnwILr-nMhPvHWLoUW19BQ/exec";

function generateQR(){
  const email=document.getElementById("email").value.trim().toLowerCase();
  const subjectId=document.getElementById("subjectId").value.trim();

  if(!email || !subjectId){
    alert("Email & Subject ID required");
    return;
  }

  const url = `${SCRIPT_URL}?action=generateQR&email=${encodeURIComponent(email)}&subjectId=${encodeURIComponent(subjectId)}`;

  fetch(url)
    .then(r=>r.text())
    .then(res=>{
      if(res.startsWith("http")){
        document.getElementById("result").innerHTML =
          `<img src="${res}"><p>QR generated successfully</p>`;
      }else{
        alert(res);
      }
    });
}
</script>
</body>
</html>
