<!DOCTYPE html>
<html>
<head>
  <title>Create Attendance</title>

  <script>
    if (localStorage.getItem("faculty") !== "true") {
      location.replace("index.html");
    }
  </script>

  <style>
    body { font-family: Arial; text-align: center; background:#f4f6f8; }
    header { background:#0a5fb4; color:white; padding:15px; font-size:20px; }
    button { padding:12px; font-size:16px; background:#0a5fb4; color:white; border:none; border-radius:5px; }
  </style>
</head>

<body>

<header>Create Attendance (Room 603 â€“ Block 7)</header>

<br>
<button onclick="generateQR()">Generate QR (Valid 5 Minutes)</button>

<div id="qrBox"></div>

<script>
function generateQR() {

  // Generate expiry timestamp (current time + 5 minutes)
  const expiryTime = Date.now() + (5 * 60 * 1000);

  // Student page with expiry parameter
  const studentURL =
    "https://attendance-prog.github.io/attendance-system/student-attendance.html?expiry=" + expiryTime;

  const qrURL =
    "https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=" +
    encodeURIComponent(studentURL);

  document.getElementById("qrBox").innerHTML = `
    <h3>Scan QR Code</h3>
    <img src="${qrURL}">
    <p><b>Valid for 5 minutes only</b></p>
    <p>Room 603, Block-7, SSBS</p>
  `;
}
</script>

</body>
</html>
