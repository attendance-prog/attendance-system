<!DOCTYPE html>
<html>
<body>
<h2>ðŸŒ± GO GREEN â€“ Faculty Dashboard</h2>

<button onclick="markAttendance()">Mark My Attendance</button>

<h3>Create Session</h3>
<input id="sub" placeholder="Subject ID">
<input id="loc" placeholder="Location ID">
<input id="st" placeholder="Start Time">
<input id="et" placeholder="End Time">
<button onclick="createSession()">Create Session</button>

<pre id="out"></pre>

<script>
const API = "https://script.google.com/macros/s/AKfycbwV_SjR5wASHwKWjWd-fLlVFFWbc-pGAUUVXcYlEOUbH1JeUnwILr-nMhPvHWLoUW19BQ/exec";
const email = localStorage.getItem("email");

function post(d){
 fetch(API,{method:"POST",body:JSON.stringify(d)})
 .then(r=>r.json()).then(x=>out.innerText=JSON.stringify(x,null,2));
}

function markAttendance(){
 navigator.geolocation.getCurrentPosition(p=>{
   post({
     action:"markStaffAttendance",
     email,
     role:"FACULTY",
     latitude:p.coords.latitude,
     longitude:p.coords.longitude,
     room:"CLASS"
   });
 });
}

function createSession(){
 post({
   action:"createSession",
   subjectId:sub.value,
   facultyEmail:email,
   startTime:st.value,
   endTime:et.value,
   locationId:loc.value
 });
}
</script>
</body>
</html>
